set quit
unset mark_old
unset move
set delete

set realname = "Bryan Bennett"
set use_from
set use_envelope_from

set header_cache = "~/.mutt/h_cache"
set message_cachedir = "~/.mutt/b_cache"

set send_charset = "utf-8"
set assumed_charset = "iso-8859-1"
set signature = "~/.signature"

set mime_forward
set mime_forward_rest

set menu_scroll
set simple_search = "~f %s | ~C %s | ~s %s"

ignore *
unignore From To Cc Bcc Date Subject

unhdr_order *
hdr_order From: To: Cc: Bcc: Date: Subject:
set pager_format = " %C - %[%H:%M] %.20v, %s%* %?H? [%H] ?"

auto_view text/html
auto_view application/msword
auto_view application/pdf
auto_view text/calendar
# alternative_order text/plain text/html

set pager_index_lines = 12
set pager_context = 5
set pager_stop


# TODO: May need to change this
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# set index_format="%s %?M?(%2M hidden) & ?%> %-30.30L %{%b %d} (%Z)"
set index_format="%4C %Z %?GI?%GI& ? %[%d/%b]  %-16.15F %?M?(%3M)&     ? %s %> %?g?%g?"
set query_command = "/home/bryan/.mutt/ldap_addr_query '%s'"

# TODO: This may also need to change

source ~/.mutt/colors/kolor_colors.muttrc

# set record="+sent"

set nm_record
set nm_record_tags = "-inbox sent me"

set folder = /home/bryan/.mail/work
set nm_default_uri="notmuch:///home/bryan/.mail/work"
set virtual_spoolfile=yes

set sort = threads
set strict_threads
set sort_browser = reverse-date
set sort_aux = last-date-received

set sidebar_width = 35
set sidebar_visible = yes
set sort_sidebar = unsorted
bind index \Cn sidebar-next
bind index \Cp sidebar-prev
bind index <space> sidebar-open
# bind index \C\\ sidebar-toggle
set sidebar_delim = ' │'
color sidebar yellow default


set sendmail="/usr/bin/msmtp -a work"
set from="Bryan.Bennett@gtri.gatech.edu"

virtual-mailboxes \
  "Inbox"  "notmuch://?query=tag:inbox and NOT tag:deleted" \
  "To Do"  "notmuch://?query=tag:TODO and NOT tag:deleted" \
  "Sent"   "notmuch://?query=tag:sent" \
  "HCI"    "notmuch://?query=tag:hci and NOT tag:deleted" \
  "Trash" "notmuch://?query=tag:deleted" \
  "jira"   "notmuch://?query=tag:jira" \
  "stash"  "notmuch://?query=tag:stash" \
  "cron"   "notmuch://?query=tag:cron" \
  "GaTech GVU"   "notmuch://?query=tag:GVU" \
  "GaTech COC"   "notmuch://?query=tag:COC" 

tag-transforms \
  "inbox"   "i"   \
  "unread"  "u"   \
  "replied" "↻ "  \
  "sent"    "➥ "  \
  "todo"    "T"   \
  "deleted" "DEL" 

macro index,pager "\C?" "<modify-labels-then-hide>+deleted -inbox\n<sync-mailbox>"
macro index,pager d "<modify-labels-then-hide>+deleted -inbox\n<sync-mailbox>"
macro index,pager u "<modify-labels-then-hide>-inbox\n<sync-mailbox>"
macro index,pager l "<modify-labels>"

macro index,pager to "<modify-labels>+ApiaryOM\n<sync-mailbox>"
macro index,pager td "<modify-labels>+DSSA\n<sync-mailbox>"
macro index,pager ts "<modify-labels>+Sentar\n<sync-mailbox>"
macro index,pager tt "<modify-labels>+TODO\n<sync-mailbox>"
macro index,pager tT "<modify-labels>-TODO\n<sync-mailbox>"

macro index,pager ,r ":unset wait_key;\n|add_reminder\n:set wait_key; unset pipe_decode\n" "record a reminder"

bind index - collapse-thread
bind index _ collapse-all
